name = "vaultic-storage"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# ============================================
# CONFIGURATION
# ============================================
# AUTH_TOKEN: Token untuk autentikasi ke worker ini
# Set via: wrangler secret put AUTH_TOKEN
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

[vars]
# Kosongkan di sini, gunakan wrangler secret put AUTH_TOKEN

# ============================================
# R2 BUCKET
# ============================================
[[r2_buckets]]
binding = "STORAGE_BUCKET"
bucket_name = "vaultic-storage"

# ============================================
# MULTIPLE ACCOUNTS SETUP
# ============================================
# Untuk deploy ke akun Cloudflare yang berbeda:
#
# 1. Copy folder workers/storage ke lokasi baru
# 2. Rename worker di wrangler.toml (e.g., "my-storage-1")
# 3. Update bucket_name sesuai bucket R2 di akun tersebut
# 4. Login ke akun: wrangler login
# 5. Create bucket: wrangler r2 bucket create my-bucket-name
# 6. Set secret: wrangler secret put AUTH_TOKEN
# 7. Deploy: wrangler deploy
#
# Catat URL worker dan AUTH_TOKEN untuk ditambahkan di Vaultic app
